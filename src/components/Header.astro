---
import DarkModeToggle from './DarkModeToggle.astro';

const currentPath = Astro.url.pathname;
const navItems = [
  { href: '/', label: 'Accueil' },
  { href: '/modules', label: 'Modules' },
  { href: '/pedagogie', label: 'Pédagogie' },
  { href: '/a-propos', label: 'À propos' },
  { href: '/contact', label: 'Contact' },
];
---

<header class="bg-warm-50 dark:bg-warm-900 border-b border-warm-200 dark:border-warm-700">
  <nav class="container mx-auto px-4 py-4" aria-label="Navigation principale">
    <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
      <a
        href="/"
        class="inline-block focus:outline-none focus:ring-2 focus:ring-terracotta-500 focus:ring-offset-2 rounded transition-opacity hover:opacity-80"
        aria-label="CDMC - Retour à l'accueil"
      >
        <img src="/logo.svg" alt="CDMC" class="h-10 w-auto" width="200" height="60" />
      </a>
      <div class="flex items-center gap-4 md:gap-6">
        <ul class="flex flex-wrap gap-4 md:gap-6" role="list">
          {navItems.map((item) => {
            const isActive = currentPath === item.href || 
              (item.href !== '/' && currentPath.startsWith(item.href));
            return (
              <li>
                <a
                  href={item.href}
                  class={`px-2 py-1 rounded transition-colors focus:outline-none focus:ring-2 focus:ring-terracotta-500 focus:ring-offset-2 ${
                    isActive
                      ? 'text-terracotta-700 dark:text-terracotta-400 font-semibold underline decoration-2 underline-offset-4'
                      : 'text-warm-700 dark:text-warm-200 hover:text-terracotta-600 dark:hover:text-terracotta-400'
                  }`}
                  aria-current={isActive ? 'page' : undefined}
                >
                  {item.label}
                </a>
              </li>
            );
          })}
        </ul>
        <DarkModeToggle />
      </div>
    </div>
  </nav>
</header>

