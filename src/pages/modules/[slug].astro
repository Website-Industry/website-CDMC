---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Section from '../../components/Section.astro';
import CTA from '../../components/CTA.astro';
import LevelTag from '../../components/LevelTag.astro';
import { getModuleBySlug, modules, formatCapacity } from '../../data/modules';
import { pricingTiers, pricingInfo, paymentOptions } from '../../data/pricing';

export async function getStaticPaths() {
  return modules.map((module) => ({
    params: { slug: module.slug },
  }));
}

const { slug } = Astro.params;
const module = getModuleBySlug(slug!);

if (!module) {
  return Astro.redirect('/modules');
}

// Fonction pour d√©terminer si une date est pass√©e
function isDatePast(dateStr: string): boolean {
  const now = new Date();
  const currentYear = now.getFullYear();
  
  const monthNames: Record<string, number> = {
    'janvier': 0,
    'f√©vrier': 1,
    'mars': 2,
    'avril': 3,
    'mai': 4,
    'juin': 5,
    'juillet': 6,
    'ao√ªt': 7,
    'septembre': 8,
    'octobre': 9,
    'novembre': 10,
    'd√©cembre': 11,
  };
  
  const match = dateStr.match(/^(\d+)\s+(.+)$/);
  if (!match) return false;
  
  const day = parseInt(match[1]);
  const monthName = match[2].toLowerCase();
  const month = monthNames[monthName];
  
  if (month === undefined) return false;
  
  // On assume que les dates sont en 2026 (ann√©e du cycle)
  const date = new Date(2026, month, day);
  return date < now;
}

// Contenu des s√©ances pour Th√©orie D√©butant
const sessionContent = module.slug === 'theorie-debutant' ? [
  {
    number: 1,
    title: 'Bases gammes & accords + mineure naturelle',
    objective: 'consolider le socle commun.',
    content: {
      rappels: [
        "Qu'est-ce qu'une gamme",
        'Intervalles de la gamme majeure',
        'Gammes majeures dans tous les tons',
        'Harmonisation de la gamme majeure',
        'Accords de triades : M / m / dim',
        'Fonctions des degr√©s I, IV, V, VII',
        'Accords majeurs, mineurs, diminu√©s',
      ],
      decouverte: {
        title: 'D√©couverte de la gamme mineure naturelle :',
        items: [
          'Intervalles',
          'Harmonisation',
          'Mise en pratique (clavier / MAO)',
        ],
      },
    },
  },
  {
    number: 2,
    title: 'Les gammes mineures',
    objective: 'comprendre les variantes de la mineure et leur r√¥le harmonique.',
    content: {
      rappel: ['Gamme mineure naturelle'],
      harmonique: {
        title: 'Gamme mineure harmonique :',
        items: ['Sensible, tension'],
      },
      melodique: {
        title: 'Gamme mineure m√©lodique :',
        items: ['Logique fonctionnelle'],
      },
      comparaison: {
        title: 'Comparaison des 3 gammes mineures',
        items: [
          'Harmonisation (triades)',
          '√âcoute et applications musicales',
        ],
      },
    },
  },
  {
    number: 3,
    title: 'Accords de 7e & fonctions harmoniques',
    objective: 'enrichir l\'harmonie et structurer les progressions.',
    content: {
      construction: {
        title: 'Construction des accords de 7e :',
        items: ['Maj7, 7, m7, m7‚ô≠5, dim7 (approche simple)'],
      },
      harmonisation: 'Harmonisation de la gamme majeure en accords de 7e',
      fonctions: {
        title: 'Fonctions harmoniques :',
        items: [
          'Tonique / Sous-dominante / Dominante',
          'Introduction du II ‚Äì V ‚Äì I',
          'En majeur',
          'Mise en pratique et √©coute',
        ],
      },
    },
  },
  {
    number: 4,
    title: 'Accords suspendus & enrichis',
    objective: 'comprendre la couleur et la tension non fonctionnelle.',
    content: {
      suspendus: {
        title: 'Accords sus2 / sus4 :',
        items: ['Notion de suspension / r√©solution'],
      },
      enrichis: {
        title: 'Accords enrichis :',
        items: [
          'add9, 9, 11, 13 (logique g√©n√©rale)',
          'Couleur vs fonction',
          'Analyse de progressions courantes',
        ],
      },
    },
  },
  {
    number: 5,
    title: 'Gammes pentatoniques, blues & synth√®se',
    objective: 'relier th√©orie, jeu et improvisation.',
    content: {
      pentatoniques: {
        title: 'Gammes pentatoniques :',
        items: ['Majeure / mineure'],
      },
      blues: {
        title: 'Gamme blues :',
        items: ['Blue note'],
      },
      lien: 'Lien gammes ‚Üî accords',
      impro: 'Impro guid√©e',
      synthese: 'Synth√®se globale du cycle',
    },
  },
] : null;
---

<BaseLayout
  title={`${module.title} | CDMC`}
  description={module.shortDescription}
>
  <!-- Hero du module -->
  <Section id="module-hero" className={`bg-gradient-to-b from-warm-100 dark:from-warm-800 to-warm-50 dark:to-warm-900 ${module.comingSoon ? 'opacity-75' : ''}`}>
    <div class="max-w-3xl mx-auto text-center">
      <div class="flex items-center justify-center gap-4 mb-4 flex-wrap">
        <h1 class={`text-4xl md:text-5xl font-bold ${module.comingSoon ? 'text-warm-500 dark:text-warm-400' : 'text-warm-800 dark:text-warm-100'}`}>
          {module.title}
        </h1>
        <div class="flex items-center gap-2">
          {module.comingSoon && (
            <span class="px-3 py-1 text-sm font-medium bg-warm-200 dark:bg-warm-700 text-warm-600 dark:text-warm-300 rounded">
              Prochainement
            </span>
          )}
          {module.almostFull && (
            <span class="px-3 py-1 text-sm font-medium bg-terracotta-100 dark:bg-terracotta-900 text-terracotta-700 dark:text-terracotta-300 rounded">
              Bient√¥t complet
            </span>
          )}
          <LevelTag level={module.niveau} />
        </div>
      </div>
      {module.comingSoon && (
        <div class="bg-warm-100 dark:bg-warm-800 rounded-lg p-4 mb-4 border-l-4 border-warm-300 dark:border-warm-600">
          <p class="text-warm-700 dark:text-warm-200 font-medium mb-2">
            Ce module est actuellement en pause et sera disponible prochainement.
          </p>
          <p class="text-warm-700 dark:text-warm-200 text-sm">
            Tu peux <strong>t'y pr√©-inscrire</strong> d√®s maintenant. 
            Dans le formulaire, utilise la section "Commentaire" pour me situer sur ton projet et tes attentes.
          </p>
        </div>
      )}
      {module.almostFull && (
        <div class="bg-terracotta-50 dark:bg-terracotta-900 rounded-lg p-4 mb-4 border-l-4 border-terracotta-400 dark:border-terracotta-500">
          <p class="text-terracotta-800 dark:text-terracotta-200 font-medium">
            ‚ö†Ô∏è Ce module est bient√¥t complet. Inscris-toi rapidement pour garantir ta place !
          </p>
        </div>
      )}
      <p class={`text-xl mb-6 ${module.comingSoon ? 'text-warm-500 dark:text-warm-400' : 'text-warm-700 dark:text-warm-200'}`}>
        {module.fullDescription}
      </p>
    </div>
  </Section>

  <!-- Pr√©requis -->
  <Section id="prerequis" title="Pr√©requis et niveau requis" className="bg-warm-50 dark:bg-warm-900">
    <div class="max-w-3xl mx-auto">
      {module.niveau === 1 && (
        <div class="bg-warm-50 dark:bg-warm-800 border-l-4 border-terracotta-400 dark:border-terracotta-500 rounded-lg p-6">
          <div class="flex items-start gap-3 mb-3">
            <LevelTag level={1} />
            <h3 class="text-xl font-semibold text-warm-800 dark:text-warm-100">
              Aucun pr√©requis n√©cessaire
            </h3>
          </div>
          <p class="text-warm-700 dark:text-warm-200 mb-3">
            Ce module est accessible √† toutes et tous, m√™me si tu n'as jamais touch√© un instrument 
            ou √©tudi√© la musique. On part de z√©ro, dans une ambiance bienveillante o√π chaque question 
            est la bienvenue. L'important, c'est ta curiosit√© et ton envie d'apprendre, pas tes connaissances pr√©alables.
          </p>
          <p class="text-warm-700 dark:text-warm-200 text-sm italic">
            Tu peux venir avec tes doutes, tes questions, et m√™me l'impression de ne rien conna√Ætre. 
            C'est exactement pour √ßa qu'on est l√†.
          </p>
          <p class="text-warm-700 dark:text-warm-200 text-sm mt-3">
            Si tu as des questions ou besoin de plus d'informations pour te situer, 
            <a href="/contact#contact-form" class="text-terracotta-600 dark:text-terracotta-400 underline hover:text-terracotta-700 dark:hover:text-terracotta-300 font-medium">n'h√©site pas √† me contacter</a>. 
            J'ai des outils √† disposition pour t'aider √† te situer et on peut le faire ensemble.
          </p>
        </div>
      )}
      {module.niveau === 2 && (
        <div class="bg-warm-50 dark:bg-warm-800 border-l-4 border-terracotta-500 dark:border-terracotta-400 rounded-lg p-6">
          <div class="flex items-start gap-3 mb-3">
            <LevelTag level={2} />
            <h3 class="text-xl font-semibold text-warm-800 dark:text-warm-100">
              Quelques bases recommand√©es
            </h3>
          </div>
          <p class="text-warm-700 dark:text-warm-200 mb-3">
            Ce module est accessible si tu as d√©j√† quelques notions de base en musique. 
            Pas besoin d'√™tre un¬∑e expert¬∑e, mais avoir d√©j√† explor√© un peu la musique (notes, accords de base, 
            pratique d'un instrument) te permettra de mieux profiter du contenu.
          </p>
          <p class="text-warm-700 dark:text-warm-200 text-sm italic mb-3">
            Si tu n'es pas s√ªr¬∑e d'avoir le niveau requis, je te recommande de commencer par le module 
            <a href="/modules/theorie-debutant" class="text-terracotta-600 dark:text-terracotta-400 underline hover:text-terracotta-700 dark:hover:text-terracotta-300 font-medium">Th√©orie D√©butant</a> pour poser de bonnes bases avant de venir ici.
          </p>
          <p class="text-warm-700 dark:text-warm-200 text-sm">
            Si tu as besoin de plus d'informations pour te situer, 
            <a href="/contact#contact-form" class="text-terracotta-600 dark:text-terracotta-400 underline hover:text-terracotta-700 dark:hover:text-terracotta-300 font-medium">n'h√©site pas √† me contacter</a>. 
            J'ai des outils √† disposition pour t'aider √† te situer et on peut le faire ensemble.
          </p>
        </div>
      )}
      {module.niveau === 3 && (
        <div class="bg-warm-50 dark:bg-warm-800 border-l-4 border-terracotta-600 dark:border-terracotta-500 rounded-lg p-6">
          <div class="flex items-start gap-3 mb-3">
            <LevelTag level={3} />
            <h3 class="text-xl font-semibold text-warm-800 dark:text-warm-100">
              Pr√©requis n√©cessaires
            </h3>
          </div>
          <p class="text-warm-700 dark:text-warm-200 mb-3">
            Ce module n√©cessite d'avoir <strong>ma√Ætris√© les concepts du module Interm√©diaire</strong> ou d'avoir 
            des connaissances √©quivalentes. Ce n'est pas un module pour tout le monde, mais si tu as les bases 
            n√©cessaires, tu y trouveras une exploration approfondie et passionnante de sujets sp√©cifiques.
          </p>
          <p class="text-warm-700 dark:text-warm-200 mb-3">
            <strong>Pr√©requis obligatoires :</strong>
          </p>
          <ul class="list-disc list-inside text-warm-700 dark:text-warm-200 mb-3 space-y-1 ml-4">
            <li>Compr√©hension des fonctions harmoniques (tonique, sous-dominante, dominante)</li>
            <li>Connaissance des cadences principales et de leurs usages</li>
            <li>Savoir ce que sont les accords enrichis (7e, 9e, 11e, 13e) - sans forc√©ment conna√Ætre toutes les possibilit√©s</li>
            <li>Capacit√© √† analyser des progressions harmoniques simples</li>
            <li>Pratique r√©guli√®re et approfondie de la th√©orie musicale</li>
          </ul>
          <p class="text-warm-700 dark:text-warm-200 text-sm italic mb-3">
            Si tu n'es pas s√ªr¬∑e d'avoir le niveau requis, je te recommande fortement de suivre le module 
            <a href="/modules/theorie-intermediaire" class="text-terracotta-600 dark:text-terracotta-400 underline hover:text-terracotta-700 dark:hover:text-terracotta-300 font-medium">Th√©orie Interm√©diaire</a> avant de venir ici. 
            Ce module avanc√© suppose que ces concepts sont d√©j√† acquis et ma√Ætris√©s.
          </p>
          <p class="text-warm-700 dark:text-warm-200 text-sm">
            Si tu as besoin de plus d'informations pour te situer, 
            <a href="/contact#contact-form" class="text-terracotta-600 dark:text-terracotta-400 underline hover:text-terracotta-700 dark:hover:text-terracotta-300 font-medium">n'h√©site pas √† me contacter</a>. 
            J'ai des outils √† disposition pour t'aider √† te situer et on peut le faire ensemble.
          </p>
        </div>
      )}
    </div>
  </Section>

  <!-- √Ä qui s'adresse ce module -->
  <Section id="target" title="√Ä qui s'adresse ce module ?" className="bg-warm-50 dark:bg-warm-900">
    <div class="max-w-3xl mx-auto">
      <p class="text-lg text-warm-700 dark:text-warm-200">
        {module.targetAudience}
      </p>
    </div>
  </Section>

  <!-- Ce qu'on y fait -->
  <Section id="content" title="Ce qu'on y fait" className="bg-warm-50 dark:bg-warm-900">
    <div class="max-w-3xl mx-auto">
      <ul class="space-y-3">
        {module.whatYouDo.map((item) => (
          <li class="flex items-start">
            <span class="text-terracotta-600 dark:text-terracotta-400 mr-3 mt-1">‚Ä¢</span>
            <span class="text-warm-700 dark:text-warm-200 text-lg">{item}</span>
          </li>
        ))}
      </ul>
    </div>
  </Section>

  <!-- Contenu d√©taill√© des s√©ances (Th√©orie D√©butant uniquement) -->
  {module.slug === 'theorie-debutant' && sessionContent && (
    <Section id="detailed-content" title="Contenu d√©taill√© des s√©ances" className="bg-warm-50 dark:bg-warm-900">
      <div class="max-w-4xl mx-auto space-y-8">
        {sessionContent.map((session, index) => {
          const sessionDate = module.dates[index];
          const isPast = sessionDate ? isDatePast(sessionDate) : false;
          
          return (
            <div class={`rounded-lg shadow-md p-6 border ${
              isPast 
                ? 'bg-warm-50 dark:bg-warm-800 border-warm-200 dark:border-warm-700 opacity-60' 
                : 'bg-white dark:bg-warm-800 border-warm-200 dark:border-warm-700'
            }`}>
              <div class="flex items-center justify-between mb-3">
                <h3 class={`text-2xl font-semibold mb-0 ${
                  isPast ? 'text-warm-500 dark:text-warm-400' : 'text-warm-800 dark:text-warm-100'
                }`}>
                  S√©ance {session.number} ‚Äî {session.title}
                </h3>
                {isPast && (
                  <span class="px-3 py-1 text-sm font-medium bg-warm-200 dark:bg-warm-700 text-warm-600 dark:text-warm-300 rounded">
                    Pass√©e
                  </span>
                )}
              </div>
              {sessionDate && (
                <p class={`text-sm mb-4 ${isPast ? 'text-warm-400 dark:text-warm-500' : 'text-warm-600 dark:text-warm-300'}`}>
                  üìÖ {sessionDate} 2026
                </p>
              )}
              <p class={`font-medium mb-4 ${isPast ? 'text-warm-500 dark:text-warm-400' : 'text-warm-700 dark:text-warm-200'}`}>
                Objectif : {session.objective}
              </p>
              <div class="space-y-4">
                {session.content.rappels && (
                  <div>
                    <h4 class={`text-lg font-semibold mb-2 ${isPast ? 'text-warm-500 dark:text-warm-400' : 'text-warm-800 dark:text-warm-100'}`}>Rappels :</h4>
                    <ul class={`space-y-2 ml-4 ${isPast ? 'text-warm-500 dark:text-warm-400' : 'text-warm-700 dark:text-warm-200'}`}>
                      {session.content.rappels.map((item) => (
                        <li>‚Ä¢ {item}</li>
                      ))}
                    </ul>
                  </div>
                )}
                {session.content.rappel && (
                  <div>
                    <h4 class={`text-lg font-semibold mb-2 ${isPast ? 'text-warm-500 dark:text-warm-400' : 'text-warm-800 dark:text-warm-100'}`}>Rappel :</h4>
                    <ul class={`space-y-2 ml-4 ${isPast ? 'text-warm-500 dark:text-warm-400' : 'text-warm-700 dark:text-warm-200'}`}>
                      {session.content.rappel.map((item) => (
                        <li>‚Ä¢ {item}</li>
                      ))}
                    </ul>
                  </div>
                )}
                {session.content.decouverte && (
                  <div>
                    <h4 class={`text-lg font-semibold mb-2 ${isPast ? 'text-warm-500 dark:text-warm-400' : 'text-warm-800 dark:text-warm-100'}`}>
                      {session.content.decouverte.title}
                    </h4>
                    <ul class={`space-y-2 ml-4 ${isPast ? 'text-warm-500 dark:text-warm-400' : 'text-warm-700 dark:text-warm-200'}`}>
                      {session.content.decouverte.items.map((item) => (
                        <li>‚Ä¢ {item}</li>
                      ))}
                    </ul>
                  </div>
                )}
                {session.content.harmonique && (
                  <div>
                    <h4 class={`text-lg font-semibold mb-2 ${isPast ? 'text-warm-500 dark:text-warm-400' : 'text-warm-800 dark:text-warm-100'}`}>
                      {session.content.harmonique.title}
                    </h4>
                    <ul class={`space-y-2 ml-4 ${isPast ? 'text-warm-500 dark:text-warm-400' : 'text-warm-700 dark:text-warm-200'}`}>
                      {session.content.harmonique.items.map((item) => (
                        <li>‚Ä¢ {item}</li>
                      ))}
                    </ul>
                  </div>
                )}
                {session.content.melodique && (
                  <div>
                    <h4 class={`text-lg font-semibold mb-2 ${isPast ? 'text-warm-500 dark:text-warm-400' : 'text-warm-800 dark:text-warm-100'}`}>
                      {session.content.melodique.title}
                    </h4>
                    <ul class={`space-y-2 ml-4 ${isPast ? 'text-warm-500 dark:text-warm-400' : 'text-warm-700 dark:text-warm-200'}`}>
                      {session.content.melodique.items.map((item) => (
                        <li>‚Ä¢ {item}</li>
                      ))}
                    </ul>
                  </div>
                )}
                {session.content.comparaison && (
                  <div>
                    <h4 class={`text-lg font-semibold mb-2 ${isPast ? 'text-warm-500 dark:text-warm-400' : 'text-warm-800 dark:text-warm-100'}`}>
                      {session.content.comparaison.title}
                    </h4>
                    <ul class={`space-y-2 ml-4 ${isPast ? 'text-warm-500 dark:text-warm-400' : 'text-warm-700 dark:text-warm-200'}`}>
                      {session.content.comparaison.items.map((item) => (
                        <li>‚Ä¢ {item}</li>
                      ))}
                    </ul>
                  </div>
                )}
                {session.content.construction && (
                  <div>
                    <h4 class={`text-lg font-semibold mb-2 ${isPast ? 'text-warm-500 dark:text-warm-400' : 'text-warm-800 dark:text-warm-100'}`}>
                      {session.content.construction.title}
                    </h4>
                    <ul class={`space-y-2 ml-4 ${isPast ? 'text-warm-500 dark:text-warm-400' : 'text-warm-700 dark:text-warm-200'}`}>
                      {session.content.construction.items.map((item) => (
                        <li>‚Ä¢ {item}</li>
                      ))}
                    </ul>
                  </div>
                )}
                {session.content.harmonisation && (
                  <div>
                    <h4 class={`text-lg font-semibold mb-2 ${isPast ? 'text-warm-500 dark:text-warm-400' : 'text-warm-800 dark:text-warm-100'}`}>
                      {session.content.harmonisation}
                    </h4>
                  </div>
                )}
                {session.content.fonctions && (
                  <div>
                    <h4 class={`text-lg font-semibold mb-2 ${isPast ? 'text-warm-500 dark:text-warm-400' : 'text-warm-800 dark:text-warm-100'}`}>
                      {session.content.fonctions.title}
                    </h4>
                    <ul class={`space-y-2 ml-4 ${isPast ? 'text-warm-500 dark:text-warm-400' : 'text-warm-700 dark:text-warm-200'}`}>
                      {session.content.fonctions.items.map((item) => (
                        <li>‚Ä¢ {item}</li>
                      ))}
                    </ul>
                  </div>
                )}
                {session.content.suspendus && (
                  <div>
                    <h4 class={`text-lg font-semibold mb-2 ${isPast ? 'text-warm-500 dark:text-warm-400' : 'text-warm-800 dark:text-warm-100'}`}>
                      {session.content.suspendus.title}
                    </h4>
                    <ul class={`space-y-2 ml-4 ${isPast ? 'text-warm-500 dark:text-warm-400' : 'text-warm-700 dark:text-warm-200'}`}>
                      {session.content.suspendus.items.map((item) => (
                        <li>‚Ä¢ {item}</li>
                      ))}
                    </ul>
                  </div>
                )}
                {session.content.enrichis && (
                  <div>
                    <h4 class={`text-lg font-semibold mb-2 ${isPast ? 'text-warm-500 dark:text-warm-400' : 'text-warm-800 dark:text-warm-100'}`}>
                      {session.content.enrichis.title}
                    </h4>
                    <ul class={`space-y-2 ml-4 ${isPast ? 'text-warm-500 dark:text-warm-400' : 'text-warm-700 dark:text-warm-200'}`}>
                      {session.content.enrichis.items.map((item) => (
                        <li>‚Ä¢ {item}</li>
                      ))}
                    </ul>
                  </div>
                )}
                {session.content.pentatoniques && (
                  <div>
                    <h4 class={`text-lg font-semibold mb-2 ${isPast ? 'text-warm-500 dark:text-warm-400' : 'text-warm-800 dark:text-warm-100'}`}>
                      {session.content.pentatoniques.title}
                    </h4>
                    <ul class={`space-y-2 ml-4 ${isPast ? 'text-warm-500 dark:text-warm-400' : 'text-warm-700 dark:text-warm-200'}`}>
                      {session.content.pentatoniques.items.map((item) => (
                        <li>‚Ä¢ {item}</li>
                      ))}
                    </ul>
                  </div>
                )}
                {session.content.blues && (
                  <div>
                    <h4 class={`text-lg font-semibold mb-2 ${isPast ? 'text-warm-500 dark:text-warm-400' : 'text-warm-800 dark:text-warm-100'}`}>
                      {session.content.blues.title}
                    </h4>
                    <ul class={`space-y-2 ml-4 ${isPast ? 'text-warm-500 dark:text-warm-400' : 'text-warm-700 dark:text-warm-200'}`}>
                      {session.content.blues.items.map((item) => (
                        <li>‚Ä¢ {item}</li>
                      ))}
                    </ul>
                  </div>
                )}
                {session.content.lien && (
                  <div>
                    <h4 class={`text-lg font-semibold mb-2 ${isPast ? 'text-warm-500 dark:text-warm-400' : 'text-warm-800 dark:text-warm-100'}`}>
                      {session.content.lien}
                    </h4>
                  </div>
                )}
                {session.content.impro && (
                  <div>
                    <h4 class={`text-lg font-semibold mb-2 ${isPast ? 'text-warm-500 dark:text-warm-400' : 'text-warm-800 dark:text-warm-100'}`}>
                      {session.content.impro}
                    </h4>
                  </div>
                )}
                {session.content.synthese && (
                  <div>
                    <h4 class={`text-lg font-semibold mb-2 ${isPast ? 'text-warm-500 dark:text-warm-400' : 'text-warm-800 dark:text-warm-100'}`}>
                      {session.content.synthese}
                    </h4>
                  </div>
                )}
              </div>
            </div>
          );
        })}
      </div>
    </Section>
  )}

  <!-- Points forts -->
  <Section id="highlights" title="Points forts p√©dagogiques">
    <div class="max-w-3xl mx-auto">
      <ul class="space-y-3">
        {module.highlights.map((highlight) => (
          <li class="flex items-start">
            <span class="text-terracotta-600 dark:text-terracotta-400 mr-3 mt-1">‚úì</span>
            <span class="text-warm-700 dark:text-warm-200 text-lg">{highlight}</span>
          </li>
        ))}
      </ul>
    </div>
  </Section>

  <!-- Planning et dates -->
  <Section id="schedule" title="Planning et dates 2026" className="bg-warm-50 dark:bg-warm-900">
    <div class="max-w-3xl mx-auto space-y-6">
      <div>
        <h3 class="text-xl font-semibold text-warm-800 dark:text-warm-100 mb-2">
          Rythme des s√©ances
        </h3>
        <p class="text-warm-700 dark:text-warm-200">
          <strong>{module.schedule.day}</strong> de la <strong>
            {module.schedule.week === 'Semaine Th√©orie' ? (
              <a href="/modules#organisation-mensuelle" class="text-warm-800 dark:text-warm-100 hover:text-terracotta-600 dark:hover:text-terracotta-400 underline">Semaine Th√©orie</a>
            ) : module.schedule.week === 'Semaine Pratique' ? (
              <a href="/modules#organisation-mensuelle" class="text-warm-800 dark:text-warm-100 hover:text-terracotta-600 dark:hover:text-terracotta-400 underline">Semaine Pratique</a>
            ) : (
              module.schedule.week
            )}
          </strong> de chaque mois.
          Chaque s√©ance dure <strong>2h30</strong>.
        </p>
      </div>

      <div>
        <h3 class="text-xl font-semibold text-warm-800 dark:text-warm-100 mb-4">
          Dates du cycle (janvier √† mai 2026)
        </h3>
        <div class="bg-white dark:bg-warm-800 rounded-lg shadow-md p-6 border border-warm-200 dark:border-warm-700">
          <ul class="space-y-2">
            {module.dates.map((date) => {
              const isPast = isDatePast(date);
              return (
                <li class={`flex items-center ${isPast ? 'opacity-60' : ''}`}>
                  <span class={`mr-3 ${isPast ? 'text-warm-400 dark:text-warm-500' : 'text-terracotta-600 dark:text-terracotta-400'}`}>üìÖ</span>
                  <span class={`text-lg ${isPast ? 'text-warm-500 dark:text-warm-400' : 'text-warm-700 dark:text-warm-200'}`}>
                    {date} 2026
                    {isPast && (
                      <span class="ml-2 px-2 py-0.5 text-xs font-medium bg-warm-200 dark:bg-warm-700 text-warm-600 dark:text-warm-300 rounded">
                        Pass√©e
                      </span>
                    )}
                  </span>
                </li>
              );
            })}
          </ul>
        </div>
      </div>

      <div class="bg-warm-100 dark:bg-warm-800 rounded-lg p-6">
        <p class="text-warm-800 dark:text-warm-100 mb-2">
          <strong>Lieu :</strong> {pricingInfo.location}
        </p>
        <p class="text-warm-700 dark:text-warm-200">
          <strong>Capacit√© :</strong> {formatCapacity(module.capacity)} par module
        </p>
      </div>
    </div>
  </Section>

  <!-- Tarifs -->
  <Section id="pricing" title="Tarifs" className="bg-warm-50 dark:bg-warm-900">
    <div class="max-w-3xl mx-auto">
      <p class="text-lg text-warm-700 dark:text-warm-200 mb-4">
        Les tarifs sont d√©gressifs selon le nombre de modules choisis. 
        Un groupe est constitu√© d√®s le d√©but du cycle, et une fois lanc√©¬∑e, c'est bien de rester sur la suite. 
        <strong>Tu peux aussi rejoindre en cours de route sans souci</strong> ‚Äì on s'adapte √† ta situation.
      </p>
      <div class="bg-warm-100 dark:bg-warm-800 rounded-lg p-6 mb-6">
        <p class="text-warm-800 dark:text-warm-100 mb-2">
          <strong>Exemple :</strong> Si tu choisis uniquement ce module, 
          c'est <strong class="text-terracotta-700 dark:text-terracotta-300 text-xl">{Math.round(pricingTiers[0].cyclePrice / 5)} ‚Ç¨/mois</strong> 
          (soit {pricingTiers[0].cyclePrice} ‚Ç¨ pour les 5 mois).
        </p>
        <p class="text-warm-700 dark:text-warm-200 text-sm mb-3">
          Si tu combines plusieurs modules, les tarifs sont d√©gressifs. 
          Voir la <a href="/#tarifs" class="text-terracotta-600 dark:text-terracotta-400 underline hover:text-terracotta-700 dark:hover:text-terracotta-300">page d'accueil</a> pour le d√©tail complet.
        </p>
        <p class="text-warm-700 dark:text-warm-200 text-sm">
          Plusieurs modalit√©s de paiement sont propos√©es (en 1 fois, 2 fois ou 3 fois) 
          pour t'accompagner selon ta situation.
        </p>
      </div>
    </div>
  </Section>

  <!-- CTA inscription -->
  <Section id="cta" className="bg-gradient-to-b from-terracotta-50 dark:from-terracotta-900 to-warm-100 dark:to-warm-800">
    <div class="text-center max-w-2xl mx-auto">
      {module.comingSoon ? (
        <>
          <h2 class="text-3xl font-bold text-warm-800 dark:text-warm-100 mb-4">
            Ce module t'int√©resse ?
          </h2>
          <div class="bg-white dark:bg-warm-800 rounded-lg p-6 mb-6 border border-warm-200 dark:border-warm-700 text-left">
            <p class="text-lg text-warm-700 dark:text-warm-200 mb-4">
              Ce module est actuellement en pause, mais tu peux <strong>demander des informations</strong> d√®s maintenant 
              pour √™tre inform√©¬∑e d√®s qu'il sera disponible.
            </p>
            <p class="text-warm-700 dark:text-warm-200 mb-4">
              Dans le formulaire de demande d'informations, tu pourras <strong>mettre un message dans la section "Commentaire"</strong> 
              pour me situer sur ton projet, tes envies, tes questions ou tes attentes concernant ce module. 
              Cela m'aidera √† mieux comprendre tes besoins et √† te recontacter au bon moment.
            </p>
            <p class="text-warm-600 dark:text-warm-300 text-sm italic">
              üí° M√™me si le module n'est pas encore actif, ta demande d'informations me permet de voir l'int√©r√™t 
              et de te tenir inform√©¬∑e de son ouverture prochaine.
            </p>
          </div>
          <CTA 
            href={`/contact?module=${module.id}#inscription-form`} 
            text={`Demander des informations sur ${module.title}`} 
          />
        </>
      ) : (
        <>
          <h2 class="text-3xl font-bold text-warm-800 dark:text-warm-100 mb-4">
            Int√©ress√©¬∑e par ce module ?
          </h2>
          <p class="text-lg text-warm-700 dark:text-warm-200 mb-8">
            Inscris-toi ou pose-moi tes questions via le formulaire de contact.
          </p>
          <CTA 
            href={`/contact?module=${module.id}#inscription-form`} 
            text={`Demander des informations sur ${module.title}`} 
          />
        </>
      )}
    </div>
  </Section>
</BaseLayout>

